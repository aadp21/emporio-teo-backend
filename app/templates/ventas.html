{% extends "base.html" %}

{% block title %}Ventas - Emporio Teo{% endblock %}

{% block content %}

<h1 class="mb-4">Ventas</h1>

<form class="row g-2 mb-4 align-items-center" method="get" action="/panel/ventas">
  <div class="col-auto">
    <label for="fecha" class="col-form-label">Fecha:</label>
  </div>
  <div class="col-auto">
    <input
      type="date"
      id="fecha"
      name="fecha"
      class="form-control"
      value="{{ fecha }}"
    >
  </div>
  <div class="col-auto">
    <button class="btn btn-primary btn-sm" type="submit">Ver</button>
  </div>

  <div class="col text-end">
    <a href="/panel/ventas/nueva" class="btn btn-success btn-sm">
      + Nueva venta
    </a>
  </div>
</form>

<div class="mb-3">
  <strong>Total del d√≠a:</strong> {{ "{:,.0f}".format(total_dia) }} CLP
</div>

<table class="table table-striped table-hover align-middle">
  <thead class="table-dark">
    <tr>
      <th>ID</th>
      <th>Fecha</th>
      <th>Hora</th>
      <th>Total</th>
      <th>Tipo de pago</th>
      <th>Creado</th>
    </tr>
  </thead>
  <tbody>
    {% for v in ventas %}
    <tr>
      <td>{{ v.id }}</td>
      <td>{{ v.fecha }}</td>
      <td>
        {% if v.hora %}
          {{ v.hora.strftime('%H:%M:%S') }}
        {% endif %}
      </td>
      <td>{{ "{:,.0f}".format(v.total) }}</td>
      <td>{{ v.tipo_pago }}</td>
      <td>
        {% if v.created_at %}
          {{ v.created_at.strftime('%Y-%m-%d %H:%M') }}
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}

